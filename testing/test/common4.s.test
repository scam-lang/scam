(include "inherit.s")

(define (helper) (println "oops!"))

(define common 10)

(define (z)
    (define parent nil)
    (define (getCommon) (helper) common)
    (set! 'common (+ common 1))
    this
    )

(define (x)
    (define parent (z))
    (define common 1)
    (define (helper) (println "help!"))
    this
    )

(inspect ((get 'getCommon (new (x)))))
(inspect ((get 'getCommon (new (x)))))
(inspect ((get 'getCommon (new (z)))))
(inspect ((get 'getCommon (new (z)))))
------------------------------------------
help!
((get (quote getCommon) (new (x)))) is 1
help!
((get (quote getCommon) (new (x)))) is 1
oops!
((get (quote getCommon) (new (z)))) is 13
oops!
((get (quote getCommon) (new (z)))) is 14
