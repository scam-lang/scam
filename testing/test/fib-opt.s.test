(include "compile.lib")
(include "pretty.lib")

(define (fib n)
    (if (< n 2)
        n
        (+ (fib (- n 1)) (fib (- n 2)))
        )
    )

(define x 25)
(define result)

(define s (time))
(define result (fib x))
(define f (time))
(println "(fib " x ") is " result ", " (- f s) " seconds.")

(compile fib this)

(define s (time))
(define result (fib x))
(define f (time))
(println "(fib " x ") is " result ", " (- f s) " seconds.")
------------------------------------------
gc:1, 11820 cells
gc:2, 11789 cells
gc:3, 11823 cells
gc:4, 11788 cells
gc:5, 11868 cells
gc:6, 11866 cells
(fib 25) is 75025, 3 seconds.
gc:7, 11889 cells
gc:8, 11858 cells
gc:9, 11875 cells
gc:10, 11908 cells
gc:11, 11844 cells
gc:12, 11846 cells
gc:13, 11746 cells
(fib 25) is 75025, 1 seconds.
