\chapter{Assignment}
\label{Assignment}

Once a variable has been created, it is possible to change its value,
or {\it binding},
We have already seen a form of assignment when
\link{setting elements of collections}{ListsStringsArraysSetting};
assignment to variables proceeds in a similar fasion.
Consider the following interaction with
the Scam interpreter:

\begin{verbatim}
    (define eyeColor 'black)    ; creation
    
    (inspect eyeColor)          ; reference
    -> eyeColor is black
    
    (set! eyeColor 'green)      ; assignment
    
    (eq? eyeColor 'black)       ; equality
    -> #f
    
    (eq? eyeColor 'green)       ; equality
    -> #t

    (assign eyecolor BROWN)     ; assignment (alternate)
\end{verbatim}

The assignment function is not like the arithmetic operators.
Recall that {\tt +} evaluates all its arguments
before performing the addition.
For {\it set!} and {\it assign},
the leftmost operand is not evaluated:
If it were, the assignment

\begin{verbatim}
    (define x 1)
    (set! x 3)
\end{verbatim}
    
would be equivalent to:

\begin{verbatim}
    (set! 1 3)
\end{verbatim}

In general, an operator which does not evaluate
all its arguments is known as a {\it special form}\footnote{
In Scam, there are no special forms. As such, {\it assign} is
a true function and can be given a new meaning.}.
For {\it assign}, the evaluation of the first argument
is suppressed.

\section{Other functions for changing the value of a variable}

Scam has another functions for changing the value of a
varible:

\begin{verbatim}
    (set 'x 5)
\end{verbatim}

which changes the current value of {\it x} to 5.
It is equivalent to the {\it set!} function,
except that it evaluates all its arguments. This
is why the variable name was quoted in the example.
The reason for this behavior is that, sometimes,
it is useful to derive the variable name
to be modified programmatically. The {\it set} function
allows for this while the {\it set!} function does not.

\section{Assignment and Collections}

In the chapter on
\link{lists and other collections}{ListsStringsArraysSetting},
we saw how to change an element in a collection. Recall the
the functions for doing so:

\begin{verbatim}
    (setElement collection index newValue)
    (set-car! collection newValue)
\end{verbatim}

Also, it is possible to reset the tail of a list:

\begin{verbatim}
    (set-cdr! items newTail)
\end{verbatim}

\section{Assignment and Environments/Objects}

The assignment functions can take an environment as an
optional third argument.
Because the predefined variable
{\it this} always points to the current environment,
the following
four expressions are equivalent:

\begin{verbatim}
        (assign x 5)
        (assign x 5 this)
        (set! x 5 this)
        (set (symbol "x") 5 this)
\end{verbatim}

The {\it symbol} function is used to create a variable name from
a string.
Since environments form the basis for objects in Scam,
{\it assign}, {\it set!}, and {\it set} 
can be used to update the instance variables
of objects.
